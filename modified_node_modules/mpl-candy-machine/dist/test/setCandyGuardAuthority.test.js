"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const umi_1 = require("@metaplex-foundation/umi");
const ava_1 = __importDefault(require("ava"));
const src_1 = require("../src");
const _setup_1 = require("./_setup");
(0, ava_1.default)('it can update the authority of a candy guard', async (t) => {
    // Given a Candy Machine using authority A.
    const umi = await (0, _setup_1.createUmi)();
    const authorityA = (0, umi_1.generateSigner)(umi);
    const candyGuard = await (0, _setup_1.createCandyGuard)(umi, {
        authority: authorityA.publicKey,
    });
    // When we update it to use authority B.
    const authorityB = (0, umi_1.generateSigner)(umi);
    await (0, umi_1.transactionBuilder)()
        .add((0, src_1.setCandyGuardAuthority)(umi, {
        candyGuard,
        authority: authorityA,
        newAuthority: authorityB.publicKey,
    }))
        .sendAndConfirm(umi);
    // Then the Candy Guard's authority was updated accordingly.
    const candyGuardAccount = await (0, src_1.fetchCandyGuard)(umi, candyGuard);
    t.like(candyGuardAccount, {
        authority: (0, umi_1.publicKey)(authorityB.publicKey),
    });
});
//# sourceMappingURL=setCandyGuardAuthority.test.js.map